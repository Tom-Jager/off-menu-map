(this["webpackJsonpbasic-ts"]=this["webpackJsonpbasic-ts"]||[]).push([[0],{122:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);n(61),n(62);var a=n(49),r=n.n(a),s=n(3),c=n(50),o=n.n(c),u=n(0),i=n(6),l=n(51),f=n(27),j=n(1),d=["onClick","onIdle","children","style"],h=Object(l.createCustomEqual)((function(e){return function(t,n){return Object(f.a)(t)||t instanceof google.maps.LatLng||Object(f.a)(n)||n instanceof google.maps.LatLng?new google.maps.LatLng(t).equals(new google.maps.LatLng(n)):e(t,n)}}));function p(e){var t=u.useRef();return h(e,t.current)||(t.current=e),t.current}var b=function(e){e.onClick,e.onIdle;var t,n,a=e.children,r=e.style,c=Object(i.a)(e,d),o=u.useRef(null),l=u.useState(),f=Object(s.a)(l,2),h=f[0],b=f[1];return u.useEffect((function(){o.current&&!h&&b(new window.google.maps.Map(o.current,{}))}),[o,h]),t=function(){h&&h.setOptions(c)},n=[h,c],u.useEffect(t,n.map(p)),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{ref:o,style:r}),u.Children.map(a,(function(e){if(u.isValidElement(e))return u.cloneElement(e,{map:h})}))]})},O=function(e){var t=u.useState(),n=Object(s.a)(t,2),a=n[0],r=n[1],c=u.useState(),o=Object(s.a)(c,2),i=o[0],l=o[1];return u.useEffect((function(){var t={remove:function(){}};if(!a){var n=new google.maps.Marker;t=n.addListener("click",(function(){return e.updateRestaurant(e.restaurantName)})),r(n)}return function(){a&&(a.setMap(null),google.maps.event.removeListener(t))}}),[a,e,e.restaurantName,e.podcasters]),u.useEffect((function(){if(!i&&a){var t="<h4>"+e.restaurantName+"</h4>"+e.podcasters.map((function(e){return"<p>"+e+"</p>"})).join("")+"<a href="+e.url+" target='_blank'>Google Maps Link</a>";l(new google.maps.InfoWindow({content:t}))}}),[i,a,e.podcasters,e.restaurantName,e.url]),u.useEffect((function(){a&&a.setOptions(e)}),[a,e]),u.useEffect((function(){a&&i&&(e.restaurantName===e.openRestaurant?i.open(void 0,a):i.close())}),[a,e.restaurantName,e.openRestaurant,i]),u.useEffect((function(){a&&e.map&&a.setMap(e.map)}),[a,e.map]),null},m=function(e){var t=[];for(var n in e.restaurants){var a=e.restaurants[n],r=Object(j.jsx)(O,{position:a.location,restaurantName:n,podcasters:a.podcasters,openRestaurant:e.openRestaurant,updateRestaurant:e.setOpenRestaurant,map:e.map,url:a.url},n);t.push(r)}return Object(j.jsx)(j.Fragment,{children:t})},g=n(52),x=n(53),v=n(128),y=n(129),w=n(23),R=n(133);n(122);function S(e,t){return e.restaurant.localeCompare(t.restaurant)}var k=function(e){var t=e.restaurantData.sort(S).map((function(t){var n=t.podcasters.sort().join(", ");return Object(j.jsx)(R.a.Item,{action:!0,onClick:function(){return e.setOpenRestaurant(t.restaurant)},variant:t.restaurant===e.openRestaurant?"warning":void 0,children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)(y.a,{children:t.restaurant}),Object(j.jsx)(y.a,{style:{textAlign:"right"},children:n})]})},t.restaurant)}));return Object(j.jsxs)(y.a,{children:[Object(j.jsx)(R.a,{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh",border:"1px solid #e9e9e9"},variant:"flush",children:t}),Object(j.jsxs)("p",{style:{color:"white"},children:["Created by Tom Jager using data from ",Object(j.jsx)("a",{href:"https://www.offmenupodcast.co.uk/restaurants",style:{color:"white"},children:"https://www.offmenupodcast.co.uk/restaurants"}),". You can get in touch at tjager22@gmail.com"]})]})};function E(e){return e.map((function(e){return{name:e,id:e}}))}function C(e,t){""===e.target.value&&t("")}var F=function(e){var t=u.useState(""),n=Object(s.a)(t,2),a=n[0],r=n[1],c=u.useState(""),o=Object(s.a)(c,2),i=o[0],l=o[1],f=u.useState(""),d=Object(s.a)(f,2),h=d[0],p=d[1],b=function(e){var t=new Set;for(var n in e){var a=e[n];t.add(a.area)}return Array.from(t.values())}(e.s3RestaurantData),O=function(e){var t=new Set;for(var n in e){var a,r=e[n],s=Object(x.a)(r.podcasters);try{for(s.s();!(a=s.n()).done;){var c=a.value;t.add(c)}}catch(o){s.e(o)}finally{s.f()}}return Array.from(t.values())}(e.s3RestaurantData),m=E(b),g=Object(j.jsx)(w.ReactSearchAutocomplete,{showIcon:!1,items:m,onSelect:function(e){return l(e.name)},onClear:function(){return l("")},onFocus:function(e){return C(e,l)}}),R=E(O),S=Object(j.jsx)(w.ReactSearchAutocomplete,{showIcon:!1,items:R,onSelect:function(e){return p(e.name)},onClear:function(){return p("")},onFocus:function(e){return C(e,p)}}),F=E(Object.keys(e.s3RestaurantData)),L=Object(j.jsx)(w.ReactSearchAutocomplete,{showIcon:!1,items:F,onSelect:function(e){return r(e.name)},onClear:function(){return r("")},onFocus:function(e){return C(e,r)}}),A=function(e,t,n,a){var r=[];for(var s in e){var c=e[s],o=""===t||t===c.area,u=""===n||c.podcasters.includes(n);o&&u&&(""===a||a===s)&&r.push(c)}return r}(e.s3RestaurantData,i,h,a),I=Object(j.jsx)(k,{restaurantData:A,setOpenRestaurant:e.setOpenRestaurant,openRestaurant:e.openRestaurant});return Object(j.jsxs)(v.a,{children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(v.a,{style:{textAlign:"center"},children:Object(j.jsx)("h3",{style:{color:"white"},children:"Filters"})}),Object(j.jsxs)(v.a,{style:{textAlign:"center"},children:[Object(j.jsxs)(y.a,{sm:"4",style:{zIndex:3},children:[Object(j.jsx)("h4",{style:{color:"white"},children:"City"}),g]}),Object(j.jsxs)(y.a,{sm:"4",style:{zIndex:2},children:[Object(j.jsx)("h4",{style:{color:"white"},children:"Guest"}),S]}),Object(j.jsxs)(y.a,{sm:"4",style:{zIndex:1},children:[Object(j.jsx)("h4",{style:{color:"white"},children:"Restaurant"}),L]})]})]}),Object(j.jsx)(v.a,{style:{paddingTop:"2vh",zIndex:0},children:I})]})},L=n(130),A=n(131),I=n(132),M=function(e){var t=u.useState(),n=Object(s.a)(t,2),a=n[0],r=n[1];return u.useEffect((function(){if(!a){var e=new google.maps.Marker;r(e)}return function(){a&&a.setMap(null)}}),[a]),u.useEffect((function(){a&&a.setOptions(e)}),[a,e]),u.useEffect((function(){a&&e.map&&a.setMap(e.map)}),[a,e.map]),null},N=n(14),D=n(31),z=n(58),q=function(e){return Object(j.jsx)("h1",{children:e})},B={lat:51.5072,lng:.1276};function T(e,t){navigator.geolocation.getCurrentPosition((function(t){e(t.coords.latitude,t.coords.longitude)}),(function(e){t()}))}var Y=function(e){e.error,e.resetErrorBoundary;return Object(j.jsx)("div",{role:"alert",children:Object(j.jsx)("p",{children:"Sorry this service is unavailable"})})},G=function(){var e=u.useState(null),t=Object(s.a)(e,2),n=t[0],a=t[1],r=u.useState(""),c=Object(s.a)(r,2),i=c[0],l=c[1],f=u.useState(null),d=Object(s.a)(f,2),h=d[0],p=d[1],O=u.useState(B),x=Object(s.a)(O,2),w=x[0],R=x[1];if(u.useEffect((function(){null==n&&o.a.create().get("https://bk3ucgz21i.execute-api.eu-west-1.amazonaws.com/default/getRestaurantDataFromS3").then((function(e){return console.log("Retrieved S3 Data"),e.data}),(function(e){return"Request failed"})).then((function(e){return a(e)}))})),u.useEffect((function(){var e,t;null==h&&(e=function(e,t){return p({lat:e,lng:t})},t=function(){p(null)},navigator.userAgent.indexOf("Safari")>-1?"geolocation"in navigator?T(e,t):t():navigator.geolocation?navigator.permissions.query({name:"geolocation"}).then((function(n){"granted"===n.state?T(e,t):("prompt"===n.state||"denied"===n.state)&&t(),n.onchange=function(n){console.log("Permission status change"),"granted"===this.state?T(e,t):t()}})):t())})),null!=n){var S=Object(j.jsx)(F,{s3RestaurantData:n.restaurants,setOpenRestaurant:function(e){return l(e)},openRestaurant:i}),k=Object(j.jsx)(m,{restaurants:n.restaurants,openRestaurant:i,setOpenRestaurant:function(e){return l(e)}}),E={width:"100%"},C=Object(j.jsx)(L.a,{disabled:!0,style:E,children:"Find My Location"}),G=null;return h&&(C=Object(j.jsx)(L.a,{onClick:function(){R(h)},style:E,children:"Find My Location"}),G=Object(j.jsx)(M,{position:h,icon:{fillColor:"#4272f5",fillOpacity:1,strokeWeight:1,strokeColor:"#ffffff",path:N.a.icon[4],scale:.02,anchor:{x:N.a.icon[0]/2,y:N.a.icon[1],equals:function(e){return!!e&&(e.x===N.a.icon[0]/2&&e.y===N.a.icon[1])}}},clickable:!1})),Object(j.jsxs)(D.ErrorBoundary,{FallbackComponent:Y,children:[Object(j.jsxs)(z.a,{children:[" ",Object(j.jsx)("style",{children:"body { background-color: #fcb345; }"})]}),Object(j.jsxs)(A.a,{style:{paddingTop:"3vh"},children:[Object(j.jsx)(v.a,{children:Object(j.jsx)("h1",{style:{textAlign:"center",color:"white"},children:"THE OFF MENU MAP"})}),Object(j.jsxs)(v.a,{children:[Object(j.jsxs)(y.a,{sm:"6",style:{padding:"1vh"},children:[Object(j.jsx)(g.Wrapper,{apiKey:"AIzaSyCXdXiYdIRNAinnF4qF5gu-3NZLhYL0NUU",render:q,children:Object(j.jsxs)(b,{center:w,style:{flexGrow:"1",height:"81vh"},zoom:8,children:[k,G]})}),Object(j.jsx)(v.a,{style:{height:"2vh"}}),C]}),Object(j.jsx)(y.a,{sm:"6",style:{padding:"1vh"},children:S})]})]})]})}return Object(j.jsx)(D.ErrorBoundary,{FallbackComponent:Y,children:Object(j.jsx)(A.a,{style:{textAlign:"center",lineHeight:"100vh"},children:Object(j.jsx)(I.a,{animation:"border",variant:"warning"})})})};r.a.render(Object(j.jsx)(G,{}),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.0760c93e.chunk.js.map